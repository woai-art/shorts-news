# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏–∑ Telegram

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ Telegram –ø–æ—Å—Ç–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –ø—ã—Ç–∞–ª–∞—Å—å **—Å–∫–∞—á–∞—Ç—å —É–∂–µ —Å–∫–∞—á–∞–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã**:

```
‚ùå –û—à–∏–±–∫–∞: No connection adapters were found for 'D:\work\shorts_news\media\telegram\file_0.jpg'
```

### –ü—Ä–∏—á–∏–Ω–∞

1. `TelegramPostMediaManager` —Å–∫–∞—á–∏–≤–∞–ª –º–µ–¥–∏–∞ –∏–∑ Telegram –∏ —Å–æ—Ö—Ä–∞–Ω—è–ª –ª–æ–∫–∞–ª—å–Ω–æ
2. –í–æ–∑–≤—Ä–∞—â–∞–ª –ø—É—Ç—å: `D:\work\shorts_news\media\telegram\file_0.jpg`
3. `MediaManager` –ø–æ–ª—É—á–∞–ª —ç—Ç–æ—Ç –ø—É—Ç—å –∏ –ø—ã—Ç–∞–ª—Å—è —Å–∫–∞—á–∞—Ç—å –µ–≥–æ –∫–∞–∫ URL —á–µ—Ä–µ–∑ `requests`
4. `requests` –Ω–µ –ø–æ–Ω–∏–º–∞–ª –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∏ –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–û–±–Ω–æ–≤–ª–µ–Ω `scripts/media_manager.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:

### 1. –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (_download_and_process_image)

```python
def _download_and_process_image(self, image_url: str, news_title: str) -> Optional[str]:
    """–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è"""
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —É–∂–µ –ª–æ–∫–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º
        local_path_check = Path(image_url)
        if local_path_check.exists() and local_path_check.is_file():
            logger.info(f"üìÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–ø—Ä—è–º—É—é: {image_url}")
            return str(image_url)
        
        # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–±—ã—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è URL...
```

### 2. –î–ª—è –≤–∏–¥–µ–æ (_download_and_process_video)

```python
def _download_and_process_video(self, video_url: str, news_title: str) -> Optional[str]:
    """–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Twitter —á–µ—Ä–µ–∑ yt-dlp"""
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ —É–∂–µ –ª–æ–∫–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–æ–º
    local_path_check = Path(video_url)
    if local_path_check.exists() and local_path_check.is_file():
        logger.info(f"üìÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π –≤–∏–¥–µ–æ —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–ø—Ä—è–º—É—é: {video_url}")
        return str(video_url)
    
    # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ–±—ã—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –¥–ª—è URL...
```

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
TelegramPost ‚Üí —Å–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí D:\work\...\file.jpg
   ‚Üì
MediaManager ‚Üí –ø—ã—Ç–∞–µ—Ç—Å—è —Å–∫–∞—á–∞—Ç—å D:\work\...\file.jpg
   ‚Üì
‚ùå –û–®–ò–ë–ö–ê: requests –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
TelegramPost ‚Üí —Å–∫–∞—á–∏–≤–∞–µ—Ç ‚Üí D:\work\...\file.jpg
   ‚Üì
MediaManager ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ—Ç ‚Üí —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª?
   ‚Üì
‚úÖ –î–ê ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –Ω–∞–ø—Ä—è–º—É—é
```

## üìã –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

1. **–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚úÖ
   ```python
   image_url = "D:\\work\\shorts_news\\media\\telegram\\file_0.jpg"
   # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å
   ```

2. **–õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ** ‚úÖ
   ```python
   video_url = "D:\\work\\shorts_news\\media\\telegram\\video.mp4"
   # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å
   ```

3. **URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è** ‚úÖ
   ```python
   image_url = "https://example.com/image.jpg"
   # –ù–ï –ª–æ–∫–∞–ª—å–Ω—ã–π ‚Üí —Å–∫–∞—á–∏–≤–∞–µ—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ
   ```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å Telegram –ø–æ—Å—Ç—ã —Å –º–µ–¥–∏–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

```
‚úÖ Telegram –ø–æ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 1
‚úÖ –ú–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: has_media=True
üìÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª, –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞–ø—Ä—è–º—É—é: D:\work\shorts_news\media\telegram\file_0.jpg
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
‚úÖ –í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–æ
```

## üîß –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `scripts/media_manager.py`:
  - –ú–µ—Ç–æ–¥ `_download_and_process_image()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  - –ú–µ—Ç–æ–¥ `_download_and_process_video()` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `Path(url).exists()` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ Windows/Linux
- –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É URL - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ —Å–æ –≤—Å–µ–º–∏ –¥–≤–∏–∂–∫–∞–º–∏ (Twitter, Politico, ABC News, Telegram Post)

## üé¨ –ü–æ–ª–Ω—ã–π workflow –¥–ª—è Telegram –ø–æ—Å—Ç–æ–≤

```
1. –ü–æ—Å—Ç —Å —Ñ–æ—Ç–æ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∫–∞–Ω–∞–ª
   ‚Üì
2. TelegramPostEngine –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
   ‚Üì
3. TelegramPostMediaManager —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–æ—Ç–æ –∏–∑ Telegram
   ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ—Ç: D:\work\shorts_news\media\telegram\file_0.jpg
   ‚Üì
4. MediaManager –ø–æ–ª—É—á–∞–µ—Ç –ø—É—Ç—å
   ‚Üí –ü—Ä–æ–≤–µ—Ä—è–µ—Ç: —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª?
   ‚Üí ‚úÖ –î–ê: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å –Ω–∞–ø—Ä—è–º—É—é
   ‚Üì
5. VideoExporter —Å–æ–∑–¥–∞–µ—Ç –≤–∏–¥–µ–æ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
   ‚Üì
6. ‚úÖ –£–°–ü–ï–•
```

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: 2025-10-02  
**–í–µ—Ä—Å–∏—è**: 1.0.1

