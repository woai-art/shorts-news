# Shorts News - Telegram Workflow

## ๐ฑ ะะฑะทะพั

ะกะธััะตะผะฐ **Shorts News** ัะตะฟะตัั ัะฐะฑะพัะฐะตั ั **Telegram ะบะฐะฝะฐะปะพะผ** ะบะฐะบ ะพัะฝะพะฒะฝัะผ ะธััะพัะฝะธะบะพะผ ะฝะพะฒะพััะตะน. ะะพะปัะทะพะฒะฐัะตะปะธ ัะตะฟะพัััั ะฝะพะฒะพััะธ ะฒ ัะฟะตัะธะฐะปัะฝัะน ะบะฐะฝะฐะป, ะฐ ัะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ:

1. **ะะฐััะธั ัััะปะบะธ** ะธะท ัะพะพะฑัะตะฝะธะน
2. **ะะทะฒะปะตะบะฐะตั ะบะพะฝัะตะฝั** ั ะฒะตะฑ-ัััะฐะฝะธั
3. **ะัะพะฒะตััะตั ัะฐะบัั** ัะตัะตะท Google Search Grounding
4. **ะกะพะทะดะฐะตั ะฒะธะดะตะพ** ั ะฐะฝะธะผะฐัะธัะผะธ
5. **ะะฐะณััะถะฐะตั** ะฝะฐ YouTube Shorts

## ๐ ะััะธัะตะบัััะฐ

```
Telegram Channel (@tubepull_bot)
          โ
          โผ
    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
    โ Telegram    โ -> โ Web Parser      โ
    โ Bot         โ    โ (BeautifulSoup, โ
    โโโโโโโโโโโโโโโ    โ Selenium)       โ
          โ            โโโโโโโโโโโโโโโโโโโ
          โผ                     โ
    โโโโโโโโโโโโโโโ             โผ
    โ Database    โ    โโโโโโโโโโโโโโโโโโโ
    โ (SQLite)    โ <- โ Gemini + Search โ
    โโโโโโโโโโโโโโโ    โ Grounding       โ
          โ            โโโโโโโโโโโโโโโโโโโ
          โผ                     โ
    โโโโโโโโโโโโโโโ             โผ
    โ Orchestratorโ    โโโโโโโโโโโโโโโโโโโ
    โ             โ -> โ Video Generator โ
    โโโโโโโโโโโโโโโ    โ (GSAP, Canvas)  โ
          โ            โโโโโโโโโโโโโโโโโโโ
          โผ                     โ
    โโโโโโโโโโโโโโโ             โผ
    โ YouTube     โ    โโโโโโโโโโโโโโโโโโโ
    โ API         โ <- โ SEO Generation  โ
    โโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ ะัััััะน ััะฐัั

### 1. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

```bash
# ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
pip install -r requirements.txt

# ะกะพะทะดะฐะฝะธะต .env ัะฐะนะปะฐ
python start_telegram_workflow.py --env
```

### 2. ะะฐะฟะพะปะฝะตะฝะธะต API ะบะปััะตะน

ะััะตะดะฐะบัะธััะนัะต `config/.env`:

```env
# ะะฑัะทะฐัะตะปัะฝะพ
GEMINI_API_KEY=ะฒะฐั_ะบะปัั_ะพั_Google_AI_Studio

# ะะฟัะธะพะฝะฐะปัะฝะพ (ะดะปั YouTube ะทะฐะณััะทะบะธ)
YOUTUBE_CLIENT_SECRET_FILE=config/client_secret.json
```

### 3. ะัะพะฒะตัะบะฐ ัะธััะตะผั

```bash
python start_telegram_workflow.py --check
```

### 4. ะะฐะฟััะบ ะฑะพัะฐ

```bash
python start_telegram_workflow.py --bot
```

## ๐ฑ ะะฐะฑะพัะฐ ั Telegram

### ะัะฝะพะฒะฝะพะน ะบะฐะฝะฐะป

- **ะะฐะฝะฐะป**: `@tubepull_bot`
- **ะขะพะบะตะฝ**: `YOUR_TELEGRAM_BOT_TOKEN_HERE`

### ะคะพัะผะฐั ัะพะพะฑัะตะฝะธะน

ะะพั ะฟัะธะฝะธะผะฐะตั:
- โ ะกััะปะบะธ ะฝะฐ ะฝะพะฒะพััะธ: `https://bbc.com/news/...`
- โ ะะตะฟะพััั ะธะท ะดััะณะธั ะบะฐะฝะฐะปะพะฒ
- โ ะขะตะบััะพะฒัะต ะฝะพะฒะพััะธ ะฑะตะท ัััะปะพะบ

### ะะพะผะฐะฝะดั ะฑะพัะฐ

- `/start` - ะฝะฐัะฐะปะพ ัะฐะฑะพัั
- `/help` - ัะฟัะฐะฒะบะฐ
- `/stats` - ััะฐัะธััะธะบะฐ

## ๐ Web Parser

### ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะธััะพัะฝะธะบะธ

- **ะะพะฒะพััะธ**: BBC, CNN, Reuters, NYT, Washington Post
- **ะกะพัะธะฐะปัะฝัะต ัะตัะธ**: Twitter/X, Facebook, Instagram, Telegram
- **ะะฑัะธะต ัะฐะนัั**: ะัะฑัะต ะฒะตะฑ-ัััะฐะฝะธัั ั ะบะพะฝัะตะฝัะพะผ

### ะคัะฝะบัะธะธ ะฟะฐััะตัะฐ

```python
from scripts.web_parser import WebParser

parser = WebParser('config/config.yaml')
result = parser.parse_url('https://bbc.com/news/...')

print(result)
# {
#   'success': True,
#   'title': 'ะะฐะณะพะปะพะฒะพะบ ะฝะพะฒะพััะธ',
#   'description': 'ะขะตะบัั ะฝะพะฒะพััะธ...',
#   'source': 'BBC News',
#   'images': ['url1.jpg', 'url2.jpg'],
#   'content_type': 'news_article'
# }
```

## ๐ Google Search Grounding

### ะัะพะฒะตัะบะฐ ัะฐะบัะพะฒ

ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะพะฒะตััะตั:
- โ ะขะตะบััะธะน ััะฐััั ะฟะพะปะธัะธัะตัะบะธั ัะธะณัั
- โ ะะบััะฐะปัะฝะพััั ะดะฐั ะธ ัะพะฑััะธะน
- โ ะะพััะตะบัะฝะพััั ะฝะฐะทะฒะฐะฝะธะน ะธ ัะตัะผะธะฝะพะฒ

### ะัะธะผะตั ัะฐะฑะพัั

```python
# ะัะธะผะตั: ะฝะพะฒะพััั ะพ ะฟัะตะทะธะดะตะฝัะต ะขัะฐะผะฟะต
news = "ะะพะฝะฐะปัะด ะขัะฐะผะฟ ะพะฑััะฒะธะป ะพ ะฝะพะฒัั ัะฐะฝะบัะธัั..."

# Grounding ะฟัะพะฒะตััะตั:
# - ะฏะฒะปัะตััั ะปะธ ะขัะฐะผะฟ ะดะตะนััะฒัััะธะผ ะฟัะตะทะธะดะตะฝัะพะผ?
# - ะัะปะธ ะปะธ ัะฐะบะธะต ัะฐะฝะบัะธะธ ะฝะฐ ัะฐะผะพะผ ะดะตะปะต?
# - ะะบััะฐะปัะฝั ะปะธ ะดะฐัั?

fact_check = {
    'accuracy_score': 0.85,
    'issues_found': ['ะกัะฐััั ะฟัะตะทะธะดะตะฝัะฐ ัััะฐัะตะป'],
    'corrections': ['ะขัะฐะผะฟ - ัะบัะฟัะตะทะธะดะตะฝั, ัะตะนัะฐั ะะฐะนะดะตะฝ'],
    'verification_status': 'needs_check'
}
```

## ๐ฌ ะกะพะทะดะฐะฝะธะต ะฒะธะดะตะพ

### ะจะฐะฑะปะพะฝั ะฐะฝะธะผะฐัะธะน

- **Header**: ะะพะณะพัะธะฟ ะธััะพัะฝะธะบะฐ + ะฝะฐะทะฒะฐะฝะธะต
- **Body**: ะะฝะธะผะธัะพะฒะฐะฝะฝัะน ัะตะบัั ะฝะพะฒะพััะธ
- **Footer**: ะะฐัะฐ + ะธััะพัะฝะธะบ

### ะะฐัะฐะผะตััั ะฒะธะดะตะพ

```yaml
video:
  width: 1080      # Shorts ัะพัะผะฐั
  height: 1920
  duration_seconds: 5
  fps: 30
```

## ๐ ะะฐะทะฐ ะดะฐะฝะฝัั

### ะกัััะบัััะฐ ัะฐะฑะปะธั

```sql
-- ะัะฝะพะฒะฝะฐั ัะฐะฑะปะธัะฐ ะฝะพะฒะพััะตะน
CREATE TABLE user_news (
    id INTEGER PRIMARY KEY,
    url TEXT UNIQUE,
    title TEXT NOT NULL,
    description TEXT,
    source TEXT,
    fact_check_score REAL,
    processed INTEGER DEFAULT 0,
    video_created INTEGER DEFAULT 0
);

-- ะะทะพะฑัะฐะถะตะฝะธั ะฝะพะฒะพััะตะน
CREATE TABLE news_images (
    id INTEGER PRIMARY KEY,
    news_id INTEGER,
    image_url TEXT,
    downloaded INTEGER DEFAULT 0
);

-- ะััะพัะฝะธะบะธ ะฟัะพะฒะตัะบะธ ัะฐะบัะพะฒ
CREATE TABLE fact_check_sources (
    id INTEGER PRIMARY KEY,
    news_id INTEGER,
    source_url TEXT,
    confidence_score REAL
);
```

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะัะฝะพะฒะฝัะต ะฝะฐัััะพะนะบะธ

```yaml
# config/config.yaml
llm:
  provider: "gemini"
  model: "gemini-2.0-flash"
  enable_fact_checking: true
  grounding_temperature: 0.3

news_parser:
  update_interval_seconds: 30
  max_news_per_check: 10
  web_parser_timeout: 15
```

## ๐ง ะะตะถะธะผั ัะฐะฑะพัั

### 1. ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะัะพะฒะตัะบะฐ ัะธััะตะผั
python start_telegram_workflow.py --check

# ะะฑัะฐะฑะพัะบะฐ ะพะดะธะฝ ัะฐะท
python start_telegram_workflow.py --process
```

### 2. ะัะพะดะฐะบัะฝ

```bash
# ะะฐะฟััะบ ะฑะพัะฐ
python start_telegram_workflow.py --bot

# ะะตะฟัะตััะฒะฝะฐั ะพะฑัะฐะฑะพัะบะฐ (ะฒ ะดััะณะพะผ ัะตัะผะธะฝะฐะปะต)
python start_telegram_workflow.py --continuous
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

### ะะพะณะธ

```
logs/
โโโ shorts_news.log     # ะัะฝะพะฒะฝะพะน ะปะพะณ
โโโ telegram_bot.log    # ะะพะณ ะฑะพัะฐ
โโโ errors.log         # ะัะธะฑะบะธ
```

### ะกัะฐัะธััะธะบะฐ

ะงะตัะตะท Telegram ะฑะพัะฐ:
```
/stats
```

### ะะตััะธะบะธ

- ะะพะปะธัะตััะฒะพ ะพะฑัะฐะฑะพัะฐะฝะฝัั ะฝะพะฒะพััะตะน
- ะฃัะฟะตัะฝะพััั ัะพะทะดะฐะฝะธั ะฒะธะดะตะพ
- ะะฐะณััะทะบะธ ะฝะฐ YouTube
- ะัะธะฑะบะธ ะฟะฐััะธะฝะณะฐ ะธ ัะฐะบััะตะบะธะฝะณะฐ

## ๐ ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ

### ะะฐัะฟัะพัััะฐะฝะตะฝะฝัะต ะฟัะพะฑะปะตะผั

#### 1. ะัะธะฑะบะฐ ะฟะฐััะธะฝะณะฐ

```
โ ะะต ัะดะฐะปะพัั ัะฐัะฟะฐััะธัั ัััะฐะฝะธัั
```

**ะะตัะตะฝะธะต**:
- ะัะพะฒะตัะธัั ะดะพัััะฟะฝะพััั URL
- ะะพะฟัะพะฑะพะฒะฐัั ะดััะณะพะน ะธััะพัะฝะธะบ
- ะัะพะฒะตัะธัั ะฝะฐัััะพะนะบะธ Selenium

#### 2. ะัะธะฑะบะฐ Google Search Grounding

```
โ ะัะธะฑะบะฐ ะฟัะพะฒะตัะบะธ ัะฐะบัะพะฒ
```

**ะะตัะตะฝะธะต**:
- ะัะพะฒะตัะธัั GEMINI_API_KEY
- ะัะพะฒะตัะธัั ะปะธะผะธัั API
- ะัะบะปััะธัั ัะฐะบััะตะบะธะฝะณ ะฒ ะบะพะฝัะธะณะต

#### 3. ะัะธะฑะบะฐ YouTube API

```
โ ะัะธะฑะบะฐ ะทะฐะณััะทะบะธ ะฒะธะดะตะพ
```

**ะะตัะตะฝะธะต**:
- ะัะพะฒะตัะธัั client_secret.json
- ะัะพะฒะตัะธัั ะบะฒะพัั YouTube
- ะัะพะฒะตัะธัั ะฝะฐัััะพะนะบะธ ะฟัะธะฒะฐัะฝะพััะธ

## ๐ ะะฐะทะฒะตัััะฒะฐะฝะธะต

### Production ะพะบััะถะตะฝะธะต

1. **ะะฐัััะพะนะบะฐ systemd** ะดะปั ะฐะฒัะพะทะฐะฟััะบะฐ ะฑะพัะฐ
2. **ะะฐัััะพะนะบะฐ cron** ะดะปั ัะตะณัะปััะฝะพะน ะพะฑัะฐะฑะพัะบะธ
3. **ะะพะฝะธัะพัะธะฝะณ ะดะธัะบะพะฒะพะณะพ ะฟัะพัััะฐะฝััะฒะฐ**
4. **ะะตะทะตัะฒะฝะพะต ะบะพะฟะธัะพะฒะฐะฝะธะต ะฑะฐะทั ะดะฐะฝะฝัั**

### ะะฟัะธะผะธะทะฐัะธะธ

- **ะััะธัะพะฒะฐะฝะธะต** ัะตะทัะปััะฐัะพะฒ ะฟะฐััะธะฝะณะฐ
- **ะัะตัะตะดั ะพะฑัะฐะฑะพัะบะธ** ะดะปั ะฑะพะปััะธั ะพะฑัะตะผะพะฒ
- **Fallback ัะตะถะธะผั** ะฟัะธ ะฝะตะดะพัััะฟะฝะพััะธ ัะตัะฒะธัะพะฒ
- **ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต** ะฝะฐ ะฝะตัะบะพะปัะบะพ ัะบะทะตะผะฟะปััะพะฒ

## ๐ API

### Telegram Bot API

```python
from scripts.telegram_bot import NewsTelegramBot

bot = NewsTelegramBot('config/config.yaml')

# ะะพะปััะตะฝะธะต ะฝะตะพะฑัะฐะฑะพัะฐะฝะฝัั ะฝะพะฒะพััะตะน
pending_news = bot.get_pending_news(limit=10)

# ะัะผะตัะบะฐ ะฝะพะฒะพััะธ ะบะฐะบ ะพะฑัะฐะฑะพัะฐะฝะฝะพะน
bot.mark_news_processed(news_id)
```

### Web Parser API

```python
from scripts.web_parser import WebParser

parser = WebParser('config/config.yaml')
result = parser.parse_url(url)
```

## ๐ฏ ะัะธะผะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### 1. ะะพะฑะฐะฒะปะตะฝะธะต ะฝะพะฒะพััะธ

```
ะะพะปัะทะพะฒะฐัะตะปั โ @tubepull_bot:
"ะะพัะผะพััะธัะต ััั ะฝะพะฒะพััั: https://bbc.com/news/..."

ะะพั ะพัะฒะตัะฐะตั:
"โ ะะพะฒะพััั ััะฟะตัะฝะพ ะพะฑัะฐะฑะพัะฐะฝะฐ!
๐ฐ ะะฐะณะพะปะพะฒะพะบ ะฝะพะฒะพััะธ
๐ ID ะฒ ัะธััะตะผะต: 123
๐ฌ ะะธะดะตะพ ะฑัะดะตั ัะพะทะดะฐะฝะพ ะฐะฒัะพะผะฐัะธัะตัะบะธ..."
```

### 2. ะัะพะฒะตัะบะฐ ััะฐัััะฐ

```
/stats

ะัะฒะตั:
๐ ะกัะฐัะธััะธะบะฐ ะฑะพัะฐ
โฑ๏ธ ะัะตะผั ัะฐะฑะพัั: 2:15:30
๐จ ะะพะปััะตะฝะพ ัััะปะพะบ: 45
โ ะะฑัะฐะฑะพัะฐะฝะพ: 42
โณ ะ ะพัะตัะตะดะธ: 3
```

### 3. ะััะฝะฐั ะพะฑัะฐะฑะพัะบะฐ

```bash
# ะ ัะตัะผะธะฝะฐะปะต
python start_telegram_workflow.py --process

# ะัะฒะพะด:
๐ ะะฐัะธะฝะฐะตะผ ัะธะบะป ะพะฑัะฐะฑะพัะบะธ ะฝะพะฒะพััะตะน ะธะท Telegram...
โ ะฆะธะบะป ะพะฑัะฐะฑะพัะบะธ ะทะฐะฒะตััะตะฝ. ะะฑัะฐะฑะพัะฐะฝะพ: 3
```

## ๐ Workflow ััะตะผะฐ

```mermaid
graph TD
    A[ะะพะปัะทะพะฒะฐัะตะปั ัะตะฟะพััะธั ะฝะพะฒะพััั] --> B[@tubepull_bot ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธะต]
    B --> C[ะะพั ะฟะฐััะธั ัััะปะบั]
    C --> D[Web Parser ะธะทะฒะปะตะบะฐะตั ะบะพะฝัะตะฝั]
    D --> E[Gemini ะฟัะพะฒะตััะตั ัะฐะบัั ัะตัะตะท Search]
    E --> F[ะกะพะทะดะฐะตััั ััััะบัััะธัะพะฒะฐะฝะฝัะน ะบะพะฝัะตะฝั]
    F --> G[ะะตะฝะตัะธััะตััั ะฐะฝะธะผะธัะพะฒะฐะฝะฝะพะต ะฒะธะดะตะพ]
    G --> H[ะะฐะณััะถะฐะตััั ะฝะฐ YouTube Shorts]
    H --> I[ะะฐะทะฐ ะดะฐะฝะฝัั ะพะฑะฝะพะฒะปัะตััั]
    I --> J[ะะพะปัะทะพะฒะฐัะตะปั ะฟะพะปััะฐะตั ัะฒะตะดะพะผะปะตะฝะธะต]
```

## ๐ ะกะฟะธัะพะบ ะธะทะผะตะฝะตะฝะธะน

### v2.0 - Telegram Workflow

- โ ะะตัะตัะพะด ะฝะฐ Telegram ะบะฐะบ ะพัะฝะพะฒะฝะพะน ะธััะพัะฝะธะบ
- โ ะะฝัะตะณัะฐัะธั Web Parser ะดะปั ะฒัะตั ัะธะฟะพะฒ ัััะปะพะบ
- โ Google Search Grounding ะดะปั ะฟัะพะฒะตัะบะธ ัะฐะบัะพะฒ
- โ ะะฐััะธัะตะฝะฝะฐั ะฑะฐะทะฐ ะดะฐะฝะฝัั ั ะผะตะดะธะฐ ะฟะพะดะดะตัะถะบะพะน
- โ ะฃะปัััะตะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ ะฟะพะปะธัะธัะตัะบะธั ะฝะพะฒะพััะตะน
- โ ะะฟัะธะผะธะทะฐัะธั ะดะปั ะผะพะฑะธะปัะฝะพะณะพ ัะพัะผะฐัะฐ Shorts

---

๐ **ะกะธััะตะผะฐ ะณะพัะพะฒะฐ ะบ ัะฐะฑะพัะต ั Telegram workflow!**
