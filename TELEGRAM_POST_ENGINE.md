# Telegram Post Engine - –ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ

–î–≤–∏–∂–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ **–ø—Ä—è–º—ã—Ö –ø–æ—Å—Ç–æ–≤ –∏–∑ Telegram** –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫. –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –º–µ–¥–∏–∞ –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Telegram, –Ω–µ –ø–µ—Ä–µ—Ö–æ–¥—è –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–∞–π—Ç—ã.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** - —Å–∏—Å—Ç–µ–º–∞ —Å–∞–º–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–æ–≥–¥–∞ –≤ –ø–æ—Å—Ç–µ –Ω–µ—Ç URL  
‚úÖ **–ü—Ä—è–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –¥–∞–Ω–Ω—ã–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ Telegram API –±–µ–∑ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å–∞–π—Ç–æ–≤  
‚úÖ **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –º–µ–¥–∏–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Bot API  
‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∞ –∏–∑ —Ñ–æ—Ä–≤–∞—Ä–¥–æ–≤ –∏ –ø–æ–¥–ø–∏—Å–µ–π  
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞  

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
engines/telegrampost/
‚îú‚îÄ‚îÄ __init__.py                         # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ telegrampost_engine.py              # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫
‚îú‚îÄ‚îÄ telegrampost_media_manager.py       # –ú–µ–Ω–µ–¥–∂–µ—Ä –º–µ–¥–∏–∞
‚îî‚îÄ‚îÄ README.md                           # –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–æ—Å—Ç –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–≤—ã–π –∫–∞–Ω–∞–ª

```
–í–∞–∂–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å! –ü—Ä–æ–∏–∑–æ—à–ª–æ —Å–æ–±—ã—Ç–∏–µ...
[+ —Ñ–æ—Ç–æ –∏–ª–∏ –≤–∏–¥–µ–æ]
```

### 2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç

```
‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ—Å—Ç –±–µ–∑ URL
‚úÖ –°–æ–∑–¥–∞–Ω —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π URL: telegram://post/123
‚úÖ –í—ã–±—Ä–∞–Ω –¥–≤–∏–∂–æ–∫: Telegram Post
‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω —Ç–µ–∫—Å—Ç (150 —Å–∏–º–≤–æ–ª–æ–≤)
‚úÖ –ù–∞–π–¥–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 2
‚úÖ –ù–∞–π–¥–µ–Ω–æ –≤–∏–¥–µ–æ: 1
‚úÖ –ú–µ–¥–∏–∞ —Å–∫–∞—á–∞–Ω–æ: AgACAgIAAxkBAAI...
```

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç

–ù–æ–≤–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö —Å–æ –≤—Å–µ–º–∏ –º–µ–¥–∏–∞:
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫** - –ø–µ—Ä–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ** - –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç (–¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)
- **–ê–≤—Ç–æ—Ä** - –∏–∑–≤–ª–µ—á–µ–Ω –∏–∑ —Ñ–æ—Ä–≤–∞—Ä–¥–∞ –∏–ª–∏ –ø–æ–¥–ø–∏—Å–∏
- **–ú–µ–¥–∏–∞** - —Å–∫–∞—á–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω–æ

## üìù –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–ú–∏–Ω–∏–º—É–º —Ç–µ–∫—Å—Ç–∞**: 20 —Å–∏–º–≤–æ–ª–æ–≤
- **Bot Token**: –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ `.env` –∏–ª–∏ `config.yaml`
- **Telegram API**: –¥–æ—Å—Ç—É–ø –∫ Bot API

## üîß –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–î–≤–∏–∂–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –≤:
- ‚úÖ `scripts/main_orchestrator.py`
- ‚úÖ `channel_monitor.py`

## üé¨ –ü—Ä–∏–º–µ—Ä—ã

### –¢–µ–∫—Å—Ç + –§–æ—Ç–æ

**–í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
```
–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∞–ª –Ω–æ–≤—ã–π –∑–∞–∫–æ–Ω.
[—Ñ–æ—Ç–æ]
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "title": "–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∞–ª –Ω–æ–≤—ã–π –∑–∞–∫–æ–Ω",
  "description": "–ü—Ä–µ–∑–∏–¥–µ–Ω—Ç –ø–æ–¥–ø–∏—Å–∞–ª –Ω–æ–≤—ã–π –∑–∞–∫–æ–Ω.",
  "author": "News Channel",
  "images": ["telegram_photo:AgACAgIAAxkBAAI..."],
  "source": "Telegram Post"
}
```

### –¢–æ–ª—å–∫–æ –≤–∏–¥–µ–æ —Å caption

**–í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
```
[–≤–∏–¥–µ–æ]
caption: "–í–∏–¥–µ–æ —Å –ø—Ä–µ—Å—Å-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "title": "–í–∏–¥–µ–æ —Å –ø—Ä–µ—Å—Å-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏",
  "description": "–í–∏–¥–µ–æ —Å –ø—Ä–µ—Å—Å-–∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏–∏",
  "videos": ["telegram_video:BAACAgIAAxkBAAI..."],
  "source": "Telegram Post"
}
```

### –ü–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã–π –ø–æ—Å—Ç

**–í—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
```
[Forwarded from: –ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤]
–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ –æ —Å–∏—Ç—É–∞—Ü–∏–∏...
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "title": "–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ–µ –∑–∞—è–≤–ª–µ–Ω–∏–µ –æ —Å–∏—Ç—É–∞—Ü–∏–∏",
  "author": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
  "source": "Telegram Post"
}
```

## üîç –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ—Å—Ç–∞

–°–∏—Å—Ç–µ–º–∞ —Å—á–∏—Ç–∞–µ—Ç –ø–æ—Å—Ç **Telegram –ø–æ—Å—Ç–æ–º**, –µ—Å–ª–∏:

‚ùå **–ù–ï–¢ URL** –≤ —Ç–µ–∫—Å—Ç–µ (–Ω–µ—Ç `http://` –∏–ª–∏ `https://`)  
‚úÖ **–ï–°–¢–¨ —Ç–µ–∫—Å—Ç** (–º–∏–Ω–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤)  
–ò–õ–ò  
‚úÖ **–ï–°–¢–¨ –º–µ–¥–∏–∞** (—Ñ–æ—Ç–æ, –≤–∏–¥–µ–æ, –∞–Ω–∏–º–∞—Ü–∏—è)  

## üìä –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –º–µ–¥–∏–∞

| –¢–∏–ø | Telegram API | –ü—Ä–µ—Ñ–∏–∫—Å file_id |
|-----|--------------|-----------------|
| –§–æ—Ç–æ | `photo` | `telegram_photo:` |
| –í–∏–¥–µ–æ | `video` | `telegram_video:` |
| GIF | `animation` | `telegram_animation:` |
| –ö—Ä—É–≥–ª–æ–µ –≤–∏–¥–µ–æ | `video_note` | `telegram_video_note:` |
| –î–æ–∫—É–º–µ–Ω—Ç (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ) | `document` (image/*) | `telegram_document:` |
| –î–æ–∫—É–º–µ–Ω—Ç (–≤–∏–¥–µ–æ) | `document` (video/*) | `telegram_document_video:` |

## üîó URL —Å—Ö–µ–º–∞

–î–≤–∏–∂–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ URL:
- `telegram://post/{message_id}` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ö–µ–º–∞
- `tg://post/{message_id}` - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Å—Ö–µ–º–∞

**–ü—Ä–∏–º–µ—Ä:**
```
telegram://post/123
tg://post/456
```

## üìÅ –ì–¥–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –º–µ–¥–∏–∞

```
{project_base_path}/media/telegram/
```

–ü—Ä–∏–º–µ—Ä:
```
D:/work/shorts_news/media/telegram/photo_1234567.jpg
D:/work/shorts_news/media/telegram/video_1234568.mp4
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –í `.env`
```env
TELEGRAM_BOT_TOKEN=your_bot_token_here
```

### –í `config.yaml`
```yaml
telegram:
  bot_token: "your_bot_token_here"
```

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ channel_monitor
tail -f logs/debug_monitor.log

# –ù–∞–π—Ç–∏ –æ–±—Ä–∞–±–æ—Ç–∫—É Telegram –ø–æ—Å—Ç–æ–≤
grep "Telegram –ø–æ—Å—Ç" logs/debug_monitor.log
```

### –¢–∏–ø–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

```
‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω –ø–æ—Å—Ç –±–µ–∑ URL
‚úÖ –í—ã–±—Ä–∞–Ω –¥–≤–∏–∂–æ–∫: Telegram Post
‚úÖ Telegram –ø–æ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω: –í–∞–∂–Ω–∞—è –Ω–æ–≤–æ—Å—Ç—å...
üì∏ –ú–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: has_media=True
‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∫–∞—á–∞–Ω–æ: D:/work/shorts_news/media/telegram/photo_123.jpg
```

## ‚ùó –í–∞–∂–Ω–æ

‚ö†Ô∏è **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤**: Telegram Bot API –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ 20 –ú–ë  
‚ö†Ô∏è **Bot Token**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º –∏ –∏–º–µ—Ç—å –¥–æ—Å—Ç—É–ø –∫ –∫–∞–Ω–∞–ª—É  
‚ö†Ô∏è **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç**: –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∏–Ω–∏–º—É–º 20 —Å–∏–º–≤–æ–ª–æ–≤  

## üîÑ Workflow

```
1. –ü–æ—Å—Ç –±–µ–∑ URL –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∫–∞–Ω–∞–ª
   ‚Üì
2. channel_monitor –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ URL
   ‚Üì
3. –°–æ–∑–¥–∞–µ—Ç—Å—è telegram://post/{id}
   ‚Üì
4. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è TelegramPostEngine
   ‚Üì
5. –ò–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è —Ç–µ–∫—Å—Ç –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
   ‚Üì
6. –°–∫–∞—á–∏–≤–∞—é—Ç—Å—è –º–µ–¥–∏–∞ —á–µ—Ä–µ–∑ Bot API
   ‚Üì
7. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
   ‚Üì
8. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤–∏–¥–µ–æ
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- **–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `engines/telegrampost/README.md`
- **–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**: —Å–º. `channel_monitor.py`, —Å—Ç—Ä–æ–∫–∏ 455-515
- **Media Manager**: `engines/telegrampost/telegrampost_media_manager.py`

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–î–≤–∏–∂–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å–∏—Å—Ç–µ–º—É –∏ –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å Telegram –ø–æ—Å—Ç—ã.

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-10-02

